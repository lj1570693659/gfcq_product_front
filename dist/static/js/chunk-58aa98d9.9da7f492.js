(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58aa98d9"],{"18d0":function(e,t,o){"use strict";o("48e2")},"306e":function(e,t,o){"use strict";o.d(t,"a",(function(){return r})),o.d(t,"d",(function(){return l})),o.d(t,"b",(function(){return i})),o.d(t,"f",(function(){return n})),o.d(t,"e",(function(){return s})),o.d(t,"c",(function(){return p}));var a=o("b775");function r(e){return Object(a["a"])({url:"/achieve/product/prize/compute",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/achieve/product/crucial/lists",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/achieve/product/crucial/create",method:"post",data:e})}function n(e){return Object(a["a"])({url:"/achieve/product/crucial/modify",method:"put",data:e})}function s(e){return Object(a["a"])({url:"/achieve/product/prize/lists",method:"get",params:e})}function p(e){return Object(a["a"])({url:"/achieve/product/prize/export",method:"post",data:e})}},"333d":function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[o("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},r=[];o("c5f6");Math.easeInOutQuad=function(e,t,o,a){return e/=a/2,e<1?o/2*e*e+t:(e--,-o/2*(e*(e-2)-1)+t)};var l=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function i(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function n(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(e,t,o){var a=n(),r=e-a,s=20,p=0;t="undefined"===typeof t?500:t;var c=function e(){p+=s;var n=Math.easeInOutQuad(p,a,r,t);i(n),p<t?l(e):o&&"function"===typeof o&&o()};c()}var p={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},size:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.size},set:function(e){this.$emit("update:size",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,size:e}),this.autoScroll&&s(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,size:this.pageSize}),this.autoScroll&&s(0,800)}}},c=p,u=(o("d8f8"),o("0c7c")),m=Object(u["a"])(c,a,r,!1,null,"bf42f026",null);t["a"]=m.exports},"48e2":function(e,t,o){},"4bbe":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"icons-container"},[o("el-tabs",{attrs:{type:"border-card"}},[o("el-tab-pane",{attrs:{label:"基本信息"}},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"10px"}},[o("el-form-item",{attrs:{label:"",prop:"fixBudget"}},[o("el-row",[o("el-col",{attrs:{span:7}},[o("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"项目经理:",prop:"fixBudget"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.form.pmInfo.userName,callback:function(t){e.$set(e.form.pmInfo,"userName",t)},expression:"form.pmInfo.userName"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:7}},[o("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"PM分配比例:",prop:"fixBudget"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.form.productStageKpi.pmRadio,callback:function(t){e.$set(e.form.productStageKpi,"pmRadio",t)},expression:"form.productStageKpi.pmRadio"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:7}},[o("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"90px",label:"项目名称:"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.form.productInfo.product.name,callback:function(t){e.$set(e.form.productInfo.product,"name",t)},expression:"form.productInfo.product.name"}})],1)],1)],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"",prop:"fixBudget"}},[o("el-row",[o("el-col",{attrs:{span:7}},[o("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"项目经理属性:",prop:"attribute"}},[2==e.form.productInfo.product.attribute?o("el-input",{attrs:{value:"兼职",readonly:!0}}):e._e(),e._v(" "),1==e.form.productInfo.product.attribute?o("el-input",{attrs:{value:"全职",readonly:!0}}):e._e()],1)],1),e._v(" "),o("el-col",{attrs:{span:7}},[o("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"PM发放基数:",prop:"fixBudget"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.form.productStageKpi.pmBase,callback:function(t){e.$set(e.form.productStageKpi,"pmBase",t)},expression:"form.productStageKpi.pmBase"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:7}},[o("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"90px",label:"当前阶段:"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.form.stageInfo.Single.name,callback:function(t){e.$set(e.form.stageInfo.Single,"name",t)},expression:"form.stageInfo.Single.name"}})],1)],1)],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"",prop:"fixBudget"}},[o("el-row",[o("el-col",{attrs:{span:7}},[o("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"阶段比例:",prop:"attribute"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.form.productStageKpi.stageRadio,callback:function(t){e.$set(e.form.productStageKpi,"stageRadio",t)},expression:"form.productStageKpi.stageRadio"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:7}},[o("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"PM浮动比例:",prop:"fixBudget"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.form.productStageKpi.pmFloatRadio,callback:function(t){e.$set(e.form.productStageKpi,"pmFloatRadio",t)},expression:"form.productStageKpi.pmFloatRadio"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:7}},[o("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"90px",label:"优先级评分:"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.form.productInfo.product.lcScore,callback:function(t){e.$set(e.form.productInfo.product,"lcScore",t)},expression:"form.productInfo.product.lcScore"}})],1)],1)],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"",prop:"fixBudget"}},[o("el-row",[o("el-col",{attrs:{span:7}},[o("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"阶段预算:",prop:"attribute"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.form.productStageKpi.stageBudget,callback:function(t){e.$set(e.form.productStageKpi,"stageBudget",t)},expression:"form.productStageKpi.stageBudget"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:7}},[o("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"PM绩效等级:",prop:"fixBudget"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.form.productStageKpi.pmKpiLevelName,callback:function(t){e.$set(e.form.productStageKpi,"pmKpiLevelName",t)},expression:"form.productStageKpi.pmKpiLevelName"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:7}},[o("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"90px",label:"优先级:"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.form.productInfo.product.lccName,callback:function(t){e.$set(e.form.productInfo.product,"lccName",t)},expression:"form.productInfo.product.lccName"}})],1)],1)],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"",prop:"fixBudget"}},[o("el-row",[o("el-col",{attrs:{span:7}},[o("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"阶段评分:",prop:"attribute"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.form.productStageKpi.stageScore,callback:function(t){e.$set(e.form.productStageKpi,"stageScore",t)},expression:"form.productStageKpi.stageScore"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:7}},[o("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"PM绩效比例:",prop:"fixBudget"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.form.productStageKpi.pmKpiLevelRadio,callback:function(t){e.$set(e.form.productStageKpi,"pmKpiLevelRadio",t)},expression:"form.productStageKpi.pmKpiLevelRadio"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:7}},[o("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"90px",label:"项目类型:"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.form.productInfo.productType.name,callback:function(t){e.$set(e.form.productInfo.productType,"name",t)},expression:"form.productInfo.productType.name"}})],1)],1)],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"",prop:"fixBudget"}},[o("el-row",[o("el-col",{attrs:{span:7}},[o("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"应发比例:",prop:"attribute"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.form.productInfo.productMode.name,callback:function(t){e.$set(e.form.productInfo.productMode,"name",t)},expression:"form.productInfo.productMode.name"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:7}},[o("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"PM实发额度:",prop:"fixBudget"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.form.productStageKpi.pmIncentiveQuota,callback:function(t){e.$set(e.form.productStageKpi,"pmIncentiveQuota",t)},expression:"form.productStageKpi.pmIncentiveQuota"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:7}},[o("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"90px",label:"研发模式:"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.form.productInfo.productMode.name,callback:function(t){e.$set(e.form.productInfo.productMode,"name",t)},expression:"form.productInfo.productMode.name"}})],1)],1)],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"",prop:"fixBudget"}},[o("el-row",[o("el-col",{attrs:{span:7}},[o("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"阶段额度:",prop:"attribute"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.form.productStageKpi.stageQuota,callback:function(t){e.$set(e.form.productStageKpi,"stageQuota",t)},expression:"form.productStageKpi.stageQuota"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:7}},[o("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"PM分配比例:",prop:"fixBudget"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.form.productStageKpi.pmRadio,callback:function(t){e.$set(e.form.productStageKpi,"pmRadio",t)},expression:"form.productStageKpi.pmRadio"}})],1)],1)],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"",prop:"fixBudget"}},[o("el-row",[o("el-col",{attrs:{span:7}},[o("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"团队额度:",prop:"attribute"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.form.productStageKpi.crewQuota,callback:function(t){e.$set(e.form.productStageKpi,"crewQuota",t)},expression:"form.productStageKpi.crewQuota"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:7}},[o("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"PM发放基数:",prop:"fixBudget"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.form.productStageKpi.pmBase,callback:function(t){e.$set(e.form.productStageKpi,"pmBase",t)},expression:"form.productStageKpi.pmBase"}})],1)],1)],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"",prop:"fixBudget"}},[o("el-row",[o("el-col",{attrs:{span:7}},[o("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"团建额度:",prop:"attribute"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.form.productStageKpi.teamBuildQuota,callback:function(t){e.$set(e.form.productStageKpi,"teamBuildQuota",t)},expression:"form.productStageKpi.teamBuildQuota"}})],1)],1)],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"",prop:"fixBudget"}},[o("el-row",[o("el-col",{attrs:{span:7}},[o("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"业务支持额度:",prop:"attribute"}},[o("el-input",{attrs:{readonly:!0},model:{value:e.form.productStageKpi.supportQuota,callback:function(t){e.$set(e.form.productStageKpi,"supportQuota",t)},expression:"form.productStageKpi.supportQuota"}})],1)],1)],1)],1)],1)],1),e._v(" "),o("el-tab-pane",{attrs:{label:"成员绩效"}},[o("div",{staticStyle:{margin:"0 0 5px 20px"}}),e._v(" "),o("fixed-thead")],1),e._v(" "),o("el-tab-pane",{attrs:{label:"关键事件清单"}},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[o("el-table-column",{attrs:{align:"center",label:"序号",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.$index+1)+"\n          ")]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"发生日期",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.productMemberKey.happenTime))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"关键事件",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.productMemberKey.keyName))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"当事人",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.productMemberKey.username))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"事件分类",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.productMemberKey.type?o("span",[e._v("加班贡献")]):e._e(),e._v(" "),2==t.row.productMemberKey.type?o("span",[e._v("解决问题贡献")]):e._e(),e._v(" "),3==t.row.productMemberKey.type?o("span",[e._v("其他事件贡献")]):e._e()]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"处理结果",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.productMemberKey.result))])]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"created_at",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[o("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-edit"},on:{click:function(o){return e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-delete"},on:{click:function(o){return e.handleDelete(t.row)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),o("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,size:e.listQuery.size},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:size":function(t){return e.$set(e.listQuery,"size",t)},pagination:e.fetchData}})],1)],1),e._v(" "),o("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"50%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{ref:"temp",staticStyle:{"margin-left":"50px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"120px"}},[o("el-form-item",{attrs:{label:"事件分类",prop:"type"}},[o("el-select",{attrs:{filterable:"","default-first-option":"",remote:"",placeholder:"请选择事件分类"},model:{value:e.temp.type,callback:function(t){e.$set(e.temp,"type",t)},expression:"temp.type"}},e._l(e.keyTypeOptions,(function(e,t){return o("el-option",{key:e+t,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"事件性质",prop:"property"}},[o("el-select",{attrs:{filterable:"","default-first-option":"",remote:"",placeholder:"请选择事件性质"},model:{value:e.temp.property,callback:function(t){e.$set(e.temp,"property",t)},expression:"temp.property"}},e._l(e.propertyOptions,(function(e,t){return o("el-option",{key:e+t,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"关键事件：",prop:"keyName"}},[o("el-input",{attrs:{size:"small",autocomplete:"off",placeholder:"请输入关键事件"},model:{value:e.temp.keyName,callback:function(t){e.$set(e.temp,"keyName",t)},expression:"temp.keyName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"处理结果：",prop:"result"}},[o("el-input",{attrs:{size:"small",autocomplete:"off",placeholder:"请输入事件处理结果"},model:{value:e.temp.result,callback:function(t){e.$set(e.temp,"result",t)},expression:"temp.result"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"发生时间：",prop:"happenTime"}},[o("el-date-picker",{attrs:{type:"date",placeholder:"请选择事件发生时间"},model:{value:e.temp.happenTime,callback:function(t){e.$set(e.temp,"happenTime",t)},expression:"temp.happenTime"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[o("el-input",{attrs:{size:"small",autocomplete:"off",placeholder:"请输入备注信息"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){"create"===e.dialogStatus?e.createData():e.updateData()}}},[e._v(" 确认 ")])],1)],1)],1)},r=[],l=o("333d"),i=o("2b0e"),n=o("b311"),s=o.n(n);function p(){i["default"].prototype.$message({message:"Copy successfully",type:"success",duration:1500})}function c(){i["default"].prototype.$message({message:"Copy failed",type:"error"})}function u(e,t){var o=new s.a(t.target,{text:function(){return e}});o.on("success",(function(){p(),o.destroy()})),o.on("error",(function(){c(),o.destroy()})),o.onClick(t)}var m=["platform-eleme","eleme","delete-solid","delete","s-tools","setting","user-solid","user","phone","phone-outline","more","more-outline","star-on","star-off","s-goods","goods","warning","warning-outline","question","info","remove","circle-plus","success","error","zoom-in","zoom-out","remove-outline","circle-plus-outline","circle-check","circle-close","s-help","help","minus","plus","check","close","picture","picture-outline","picture-outline-round","upload","upload2","download","camera-solid","camera","video-camera-solid","video-camera","message-solid","bell","s-cooperation","s-order","s-platform","s-fold","s-unfold","s-operation","s-promotion","s-home","s-release","s-ticket","s-management","s-open","s-shop","s-marketing","s-flag","s-comment","s-finance","s-claim","s-custom","s-opportunity","s-data","s-check","s-grid","menu","share","d-caret","caret-left","caret-right","caret-bottom","caret-top","bottom-left","bottom-right","back","right","bottom","top","top-left","top-right","arrow-left","arrow-right","arrow-down","arrow-up","d-arrow-left","d-arrow-right","video-pause","video-play","refresh","refresh-right","refresh-left","finished","sort","sort-up","sort-down","rank","loading","view","c-scale-to-original","date","edit","edit-outline","folder","folder-opened","folder-add","folder-remove","folder-delete","folder-checked","tickets","document-remove","document-delete","document-copy","document-checked","document","document-add","printer","paperclip","takeaway-box","search","monitor","attract","mobile","scissors","umbrella","headset","brush","mouse","coordinate","magic-stick","reading","data-line","data-board","pie-chart","data-analysis","collection-tag","film","suitcase","suitcase-1","receiving","collection","files","notebook-1","notebook-2","toilet-paper","office-building","school","table-lamp","house","no-smoking","smoking","shopping-cart-full","shopping-cart-1","shopping-cart-2","shopping-bag-1","shopping-bag-2","sold-out","sell","present","box","bank-card","money","coin","wallet","discount","price-tag","news","guide","male","female","thumb","cpu","link","connection","open","turn-off","set-up","chat-round","chat-line-round","chat-square","chat-dot-round","chat-dot-square","chat-line-square","message","postcard","position","turn-off-microphone","microphone","close-notification","bangzhu","time","odometer","crop","aim","switch-button","full-screen","copy-document","mic","stopwatch","medal-1","medal","trophy","trophy-1","first-aid-kit","discover","place","location","location-outline","location-information","add-location","delete-location","map-location","alarm-clock","timer","watch-1","watch","lock","unlock","key","service","mobile-phone","bicycle","truck","ship","basketball","football","soccer","baseball","wind-power","light-rain","lightning","heavy-rain","sunrise","sunrise-1","sunset","sunny","cloudy","partly-cloudy","cloudy-and-sunny","moon","moon-night","dish","dish-1","food","chicken","fork-spoon","knife-fork","burger","tableware","sugar","dessert","ice-cream","hot-water","water-cup","coffee-cup","cold-drink","goblet","goblet-full","goblet-square","goblet-square-full","refrigerator","grape","watermelon","cherry","apple","pear","orange","coffee","ice-tea","ice-drink","milk-tea","potato-strips","lollipop","ice-cream-square","ice-cream-round"],d=m,f=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("div",{staticClass:"filter-container"},[o("el-checkbox-group",{model:{value:e.checkboxVal,callback:function(t){e.checkboxVal=t},expression:"checkboxVal"}},[o("el-checkbox",{attrs:{label:"序号"}},[e._v("序号")]),e._v(" "),o("el-checkbox",{attrs:{label:"项目角色"}},[e._v("项目角色")]),e._v(" "),o("el-checkbox",{attrs:{label:"工号"}},[e._v("工号")]),e._v(" "),o("el-checkbox",{attrs:{label:"姓名"}},[e._v("姓名")]),e._v(" "),o("el-checkbox",{attrs:{label:"部门"}},[e._v("部门")]),e._v(" "),o("el-checkbox",{attrs:{label:"投入占比"}},[e._v("投入占比")]),e._v(" "),o("el-checkbox",{attrs:{label:"责任系数"}},[e._v("责任系数")]),e._v(" "),o("el-checkbox",{attrs:{label:"职级"}},[e._v("职级")]),e._v(" "),o("el-checkbox",{attrs:{label:"职责和任务"}},[e._v("职责和任务")]),e._v(" "),o("el-checkbox",{attrs:{label:"工作地"}},[e._v("工作地")]),e._v(" "),o("el-checkbox",{attrs:{label:"主导方"}},[e._v("主导方")]),e._v(" "),o("el-checkbox",{attrs:{label:"支持方"}},[e._v("支持方")]),e._v(" "),o("el-checkbox",{attrs:{label:"工时占比"}},[e._v("工时占比")]),e._v(" "),o("el-checkbox",{attrs:{label:"绩效等级"}},[e._v("绩效等级")]),e._v(" "),o("el-checkbox",{attrs:{label:"浮动贡献"}},[e._v("浮动贡献")]),e._v(" "),o("el-checkbox",{attrs:{label:"备注"}},[e._v("备注")])],1)],1),e._v(" "),o("el-table",{key:e.key,staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",fit:"","highlight-current-row":""}},[e._l(e.formThead,(function(t){return o("el-table-column",{key:t,attrs:{label:t},scopedSlots:e._u([{key:"default",fn:function(o){return[e._v("\n        "+e._s(o.row[t])+"\n      ")]}}],null,!0)})})),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"created_at",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[o("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-edit"},on:{click:function(o){return e.handleCreateKeyData(t.row)}}},[e._v("录入关键事件")]),e._v(" "),o("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-edit"},on:{click:function(o){return e.handleEdit(t.row)}}},[e._v("编辑")])],1)]}}])})],2),e._v(" "),o("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,size:e.listQuery.size},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:size":function(t){return e.$set(e.listQuery,"size",t)},pagination:e.fetchData}}),e._v(" "),o("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"50%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{ref:"temp",staticStyle:{"margin-left":"50px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"120px"}},[o("el-form-item",{attrs:{label:"工号：",prop:"workNumber"}},[o("el-input",{attrs:{size:"small",autocomplete:"off",readonly:!0},model:{value:e.temp.workNumber,callback:function(t){e.$set(e.temp,"workNumber",t)},expression:"temp.workNumber"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"项目角色：",prop:"stageScore"}},[o("el-input",{attrs:{size:"small",autocomplete:"off",readonly:!0},model:{value:e.temp.prName,callback:function(t){e.$set(e.temp,"prName",t)},expression:"temp.prName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"工时占比：",prop:"overtimeRadio"}},[o("el-input",{attrs:{size:"small",autocomplete:"off",placeholder:"请输入工时占比"},model:{value:e.temp.overtimeRadio,callback:function(t){e.$set(e.temp,"overtimeRadio",t)},expression:"temp.overtimeRadio"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"浮动贡献：",prop:"floatRaio"}},[o("el-input",{attrs:{size:"small",autocomplete:"off",placeholder:"请输入浮动比例"},model:{value:e.temp.floatRaio,callback:function(t){e.$set(e.temp,"floatRaio",t)},expression:"temp.floatRaio"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"绩效等级：",prop:"kpiLevel"}},[o("el-select",{attrs:{"remote-method":e.getKpi,filterable:"","default-first-option":"",remote:"",placeholder:"请选择绩效等级"},model:{value:e.temp.kpiLevel,callback:function(t){e.$set(e.temp,"kpiLevel",t)},expression:"temp.kpiLevel"}},e._l(e.kpiOptions,(function(e,t){return o("el-option",{key:e+t,attrs:{label:e.name,value:e.name}})})),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[o("el-input",{attrs:{size:"small",autocomplete:"off",placeholder:"请输入备注信息"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.updateMemberKpiData}},[e._v(" 确认 ")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"录入关键事件",visible:e.dialogKeyFormVisible,width:"50%"},on:{"update:visible":function(t){e.dialogKeyFormVisible=t}}},[o("el-form",{ref:"keyTemp",staticStyle:{"margin-left":"50px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"120px"}},[o("el-form-item",{attrs:{label:"事件分类",prop:"type"}},[o("el-select",{attrs:{filterable:"","default-first-option":"",remote:"",placeholder:"请选择事件分类"},model:{value:e.keyTemp.type,callback:function(t){e.$set(e.keyTemp,"type",t)},expression:"keyTemp.type"}},e._l(e.keyTypeOptions,(function(e,t){return o("el-option",{key:e+t,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"事件性质",prop:"property"}},[o("el-select",{attrs:{filterable:"","default-first-option":"",remote:"",placeholder:"请选择事件性质"},model:{value:e.keyTemp.property,callback:function(t){e.$set(e.keyTemp,"property",t)},expression:"keyTemp.property"}},e._l(e.propertyOptions,(function(e,t){return o("el-option",{key:e+t,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"关键事件：",prop:"keyName"}},[o("el-input",{attrs:{size:"small",autocomplete:"off",placeholder:"请输入关键事件"},model:{value:e.keyTemp.keyName,callback:function(t){e.$set(e.keyTemp,"keyName",t)},expression:"keyTemp.keyName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"处理结果：",prop:"result"}},[o("el-input",{attrs:{size:"small",autocomplete:"off",placeholder:"请输入事件处理结果"},model:{value:e.keyTemp.result,callback:function(t){e.$set(e.keyTemp,"result",t)},expression:"keyTemp.result"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"发生时间：",prop:"happenTime"}},[o("el-date-picker",{attrs:{type:"date",placeholder:"请选择事件发生时间"},model:{value:e.keyTemp.happenTime,callback:function(t){e.$set(e.keyTemp,"happenTime",t)},expression:"keyTemp.happenTime"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[o("el-input",{attrs:{size:"small",autocomplete:"off",placeholder:"请输入备注信息"},model:{value:e.keyTemp.remark,callback:function(t){e.$set(e.keyTemp,"remark",t)},expression:"keyTemp.remark"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.createKeyData()}}},[e._v(" 确认 ")])],1)],1)],1)},b=[],h=(o("ac6a"),o("8b46")),g=o("306e"),v=o("52f3"),y=["序号","项目角色","工号","姓名","分类","部门","投入占比","责任系数","职级","职责和任务","工作地","主导方","支持方","工时占比","绩效等级","浮动贡献","备注"],k=[{id:1,name:"加班贡献"},{id:2,name:"解决问题贡献"},{id:3,name:"其他事件贡献"}],_=[{id:1,name:"正向激励"},{id:2,name:"有待提高"}],x={components:{Pagination:l["a"]},kpiId:0,data:function(){return{textMap:{update:"编辑",create:"录入阶段绩效"},keyTypeOptions:k,propertyOptions:_,dialogStatus:"",rules:{},temp:{},keyTemp:{},kpiOptions:[],dialogKeyFormVisible:!1,dialogFormVisible:!1,total:0,listQuery:{page:1,size:10},tableData:[],key:1,formTheadOptions:["序号","项目角色","工号","姓名","分类","部门","投入占比","责任系数","职级","职责和任务","工作地","主导方","支持方","工时占比","绩效等级","浮动贡献","备注"],checkboxVal:y,formThead:y}},watch:{checkboxVal:function(e){this.formThead=this.formTheadOptions.filter((function(t){return e.indexOf(t)>=0})),this.key=this.key+1}},created:function(){this.stageId=this.$route.query.stageId,this.proId=this.$route.query.proId,this.fetchData()},methods:{fetchData:function(){var e=this;Object(h["d"])({proStageId:this.stageId,page:this.listQuery.page,size:this.listQuery.size,proId:this.proId}).then((function(t){e.total=t.totalSize,e.tableData=[],t.data.forEach((function(t,o){var a="否",r="否";1===t.productMember.isGuide&&(a="是"),1===t.productMember.isSupport&&(r="是"),e.tableData.push({"序号":o+1,"项目角色":t.productMemberKpi.prName,"工号":t.productMember.workNumber,"姓名":t.userName,"分类":t.productMember.type,"部门":t.departmentName,"投入占比":t.productMember.putInto.toFixed(2),"责任系数":t.productMember.dutyIndex,"职级":t.productMember.jbName,"职责和任务":t.productMember.specificDuty,"工作地":t.productMember.workAddress,"主导方":a,"支持方":r,"工时占比":t.productMemberKpi.overtimeRadio,"绩效等级":t.productMemberKpi.kpiLevel,"浮动贡献":t.productMemberKpi.floatRaio,"备注":t.productMemberKpi.remark,"主键":t.productMemberKpi.id})}))})).catch((function(e){console.log(e)}))},getKpi:function(){var e=this;Object(v["c"])().then((function(t){t.Data&&(e.kpiOptions=[],t.Data.forEach((function(t,o){e.kpiOptions.push({id:t.Id,name:t.LevelName})})))}))},handleEdit:function(e){var t=this;"项目经理"===e.项目角色?(this.$message({message:"不能修改项目经理绩效",type:"warning",duration:2e3}),this.loading=!1):(this.temp={workNumber:e.工号,prName:e.项目角色,overtimeRadio:e.工时占比,floatRaio:e.浮动贡献,kpiLevel:e.绩效等级,remark:e.备注},this.dialogFormVisible=!0,this.dialogStatus="modify",this.getKpi(),this.$nextTick((function(){t.$refs["temp"].clearValidate()})))},updateMemberKpiData:function(){var e=this;this.temp.proId=this.$route.query.proId,this.temp.proStageId=this.$route.query.id,this.$refs.temp.validate((function(t){t&&Object(h["h"])(e.temp).then((function(t){e.$notify({title:"成功",message:"提交成功",type:"success",duration:2e3}),e.dialogFormVisible=!1,e.loading=!1,e.fetchData()}))}))},handleCreateKeyData:function(e){var t=this;console.log("row-----create---handleCreateKeyData-------",e),this.dialogKeyFormVisible=!0,this.$nextTick((function(){t.$refs["keyTemp"].clearValidate(),t.$refs["keyTemp"].kpiInfo=e}))},createKeyData:function(){var e=this;this.keyTemp.stageKpiId=this.$refs["keyTemp"].kpiInfo.主键,this.keyTemp.workNumber=this.$refs["keyTemp"].kpiInfo.工号,this.keyTemp.username=this.$refs["keyTemp"].kpiInfo.姓名,this.keyTemp.proId=this.$route.query.proId,this.keyTemp.proStageId=this.$route.query.id,Object(g["b"])(this.keyTemp).then((function(t){e.$notify({title:"成功",message:"提交成功",type:"success",duration:2e3}),e.dialogKeyFormVisible=!1,e.fetchData()}))}}},w=x,S=o("0c7c"),K=Object(S["a"])(w,f,b,!1,null,null,null),I=K.exports,$=[{id:1,name:"加班贡献"},{id:2,name:"解决问题贡献"},{id:3,name:"其他事件贡献"}],T=[{id:1,name:"正向激励"},{id:2,name:"有待提高"}],z={name:"Icons",components:{FixedThead:I,Pagination:l["a"]},kpiId:0,stageId:0,data:function(){return{textMap:{update:"编辑",create:"录入阶段绩效"},rules:{},dialogStatus:"",temp:{},dialogFormVisible:!1,form:{},list:[],keyTypeOptions:$,propertyOptions:T,listLoading:!0,elementIcons:d,total:0,listQuery:{page:1,size:10}}},created:function(){this.kpiId=this.$route.query.id,this.stageId=this.$route.query.stageId,this.fetchData(),this.fetchKeyList()},methods:{fetchData:function(){var e=this;Object(h["e"])({id:this.kpiId}).then((function(t){e.form=t})).catch((function(e){console.log(e)})),this.listLoading=!1},fetchKeyList:function(){var e=this;Object(g["d"])({proStageId:this.stageId,page:this.listQuery.page,size:this.listQuery.size}).then((function(t){e.total=t.totalSize,e.list=t.data})).catch((function(e){console.log(e)}))},generateElementIconCode:function(e){return'<i class="el-icon-'.concat(e,'" />')},handleClipboard:function(e,t){u(e,t)},handleCreate:function(e){var t=this;this.temp={},this.dialogFormVisible=!0,this.dialogStatus="create",this.$nextTick((function(){t.$refs["temp"].clearValidate()}))},handleEdit:function(e){var t=this;this.dialogFormVisible=!0,this.dialogStatus="update",this.temp={proId:e.productMemberKey.proId,stageKpiId:e.productMemberKey.stageKpiId,id:e.productMemberKey.id,keyName:e.productMemberKey.keyName,happenTime:e.productMemberKey.happenTime,type:e.productMemberKey.type,property:e.productMemberKey.property,result:e.productMemberKey.result,remark:e.productMemberKey.remark},this.dialogFormVisible=!0,this.dialogStatus="modify",this.$nextTick((function(){t.$refs["temp"].clearValidate()}))},updateData:function(){var e=this;Object(g["f"])(this.temp).then((function(t){e.$notify({title:"成功",message:"编辑成功",type:"success",duration:2e3}),e.dialogFormVisible=!1,e.fetchKeyList()})).catch((function(e){console.log(e)}))},createData:function(){var e=this;Object(g["b"])().then((function(t){e.form=t})).catch((function(e){console.log(e)}))}}},M=z,C=(o("18d0"),Object(S["a"])(M,a,r,!1,null,"9e7d1c0e",null));t["default"]=C.exports},"52f3":function(e,t,o){"use strict";o.d(t,"c",(function(){return r})),o.d(t,"a",(function(){return l})),o.d(t,"d",(function(){return i})),o.d(t,"b",(function(){return n}));var a=o("b775");function r(e){return Object(a["a"])({url:"/config/inspirit/kpiRule/all",method:"get",params:e})}function l(e){return Object(a["a"])({url:"/config/inspirit/kpiRule/create",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/config/inspirit/kpiRule/modify",method:"put",data:e})}function n(e){return Object(a["a"])({url:"/config/inspirit/kpiRule/delete",method:"delete",data:e})}},"8b46":function(e,t,o){"use strict";o.d(t,"a",(function(){return r})),o.d(t,"g",(function(){return l})),o.d(t,"c",(function(){return i})),o.d(t,"b",(function(){return n})),o.d(t,"f",(function(){return s})),o.d(t,"e",(function(){return p})),o.d(t,"d",(function(){return c})),o.d(t,"h",(function(){return u}));var a=o("b775");function r(e){return Object(a["a"])({url:"/achieve/product/create",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/achieve/product/modify",method:"put",data:e})}function i(e){return Object(a["a"])({url:"/achieve/product/lists",method:"get",params:e})}function n(e){return Object(a["a"])({url:"/achieve/product/member/export",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/achieve/product/member/import",method:"post",data:e})}function p(e){return Object(a["a"])({url:"/achieve/product/info",method:"get",params:e})}function c(e){return Object(a["a"])({url:"/achieve/product/member/lists",method:"get",params:e})}function u(e){return Object(a["a"])({url:"/achieve/product/member/modify",method:"put",data:e})}},"96ee":function(e,t,o){},d8f8:function(e,t,o){"use strict";o("96ee")}}]);