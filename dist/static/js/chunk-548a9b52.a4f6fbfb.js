(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-548a9b52"],{"4e1d":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:e.handleCreate}},[e._v("添加")]),e._v(" "),n("el-table",{ref:"lendontable",staticStyle:{width:"100%"},attrs:{data:e.renderDynamic,border:"","default-expand-all":"","row-key":"id","row-class-name":e.rowClassNameFun,"header-row-class-name":e.headerRowClassName,"header-cell-style":{background:"#fafafa"}},on:{select:e.selectFun}},[n("el-table-column",{attrs:{prop:"name",label:"角色名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"explain",label:"角色与职责说明"}}),e._v(" "),n("el-table-column",{attrs:{prop:"remark",label:"备注"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:e.alignDir,width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.handleUpdate(t.row)}}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.deleteClick(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),n("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"50%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"dataForm",staticStyle:{"margin-left":"50px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"120px"}},["update"!==e.dialogStatus?n("el-form-item",{attrs:{label:"层级：",prop:"pid"}},[n("el-select",{attrs:{placeholder:"请选择层级",size:"small"},on:{change:e.locationChange},model:{value:e.temp.pid,callback:function(t){e.$set(e.temp,"pid",t)},expression:"temp.pid"}},[n("el-option",{key:"0",attrs:{label:"顶层标准",value:"0"}}),e._v(" "),e._l(e.locationData,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],2)],1):e._e(),e._v(" "),n("el-form-item",{attrs:{label:"角色名称：",prop:"name"}},[n("el-input",{attrs:{size:"small",autocomplete:"off",placeholder:"请输入角色名称"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"角色与职责说明",prop:"explain"}},[n("el-input",{attrs:{size:"small",autocomplete:"off",placeholder:"请输入角色与职责说明"},model:{value:e.temp.explain,callback:function(t){e.$set(e.temp,"explain",t)},expression:"temp.explain"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"备注",prop:"remark"}},[n("el-input",{attrs:{size:"small",autocomplete:"off",placeholder:"请输入备注"},model:{value:e.temp.remark,callback:function(t){e.$set(e.temp,"remark",t)},expression:"temp.remark"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){"create"===e.dialogStatus?e.createData():e.updateData()}}},[e._v(" 确认 ")])],1)],1)],1)},i=[],l=(n("6762"),n("7f7f"),n("ac6a"),n("9edf")),r={name:"App",data:function(){return{renderDynamic:[],selectArr:[],tableShowData:[],locationData:[],alignDir:"center",textMap:{update:"编辑",create:"添加"},dialogStatus:"",dialogFormVisible:!1,temp:{},rules:{}}},created:function(){var e=this;Object(l["c"])().then((function(t){e.renderDynamic=t,e.initData(e.renderDynamic)}))},methods:{getSelectId:function(e){var t=this;e.forEach((function(e){!0===e.isSelect?(t.selectArr.push(e.id),e.children&&e.children.length&&t.getSelectId(e.children)):""===e.isSelect&&t.getSelectId(e.children)}))},initData:function(e){var t=this;e.forEach((function(e){e.isSelect=!1,e.children&&e.children.length&&t.initData(e.children),0===e.pid&&(t.locationData.push({id:e.id,name:e.name}),t.tableShowData[e.id]=e.name)}))},selectFun:function(e,t){this.setRowIsSelect(t)},checkIsAllSelect:function(){var e=this;this.oneProductIsSelect=[],this.renderDynamic.forEach((function(t){e.oneProductIsSelect.push(t.isSelect)}));var t=this.oneProductIsSelect.every((function(e){return 1==e}));return t},rowClassNameFun:function(e){var t=e.row;if(""===t.isSelect)return"indeterminate"},headerRowClassName:function(e){var t=e.row;console.log("row: ",t);var n=[];return this.renderDynamic.forEach((function(e){n.push(e.isSelect)})),n.includes("")?"indeterminate":""},handleCreate:function(){var e=this;this.dialogFormVisible=!0,this.dialogStatus="create",this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))},createData:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(!t)return!1;var n={id:0,pid:e.temp.pid,name:e.temp.name,explain:e.temp.explain,remark:e.temp.remark};Object(l["a"])(n).then((function(e){location.reload()}))}))},handleUpdate:function(e){var t=this;this.temp=Object.assign({},e),e.childKey?(this.childKey=e.childKey,this.idx=e.childKey[e.childKey.length-1]):this.idx=e.value,console.log(this.idx),this.parentId=e.parent,this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},updateData:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(!t)return!1;var n={pid:e.temp.pid,name:e.temp.name,explain:e.temp.explain,remark:e.temp.remark,id:e.temp.id};Object(l["d"])(n).then((function(e){location.reload()}))}))},deleteClick:function(e){var t=this;this.$confirm("此操作将删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){0!==e.children.length?t.$message.warning({message:"请删除子节点",duration:1e3}):(++t.isResouceShow,Object(l["b"])({id:e.id}).then((function(e){t.$message({type:"success",message:"删除成功"}),location.reload()})))})).catch((function(e){console.log(e),t.$message({type:"info",message:"已取消删除"})}))},setRowIsSelect:function(e){""===e.isSelect&&(e.isSelect=!1,this.$refs.lendontable.toggleRowSelection(e,!0)),e.isSelect=!e.isSelect;var t=this;function n(a){a.forEach((function(a){a.isSelect=e.isSelect,t.$refs.lendontable.toggleRowSelection(a,e.isSelect),a.children&&a.children.length&&n(a.children)}))}function a(e,t){return t.forEach((function(t){e.push(t.isSelect),t.children&&t.children.length&&a(e,t.children)})),e}function i(e){return 0==e.parentId?e.children&&e.children.length?1:4:e.children&&e.children.length?2:3}var l={};function r(e,t){return e.forEach((function(e){e.id==t&&(l=e),e.children&&e.children.length&&r(e.children,t)})),l}function o(e){var n=[],i=r(t.renderDynamic,e.parentId);n=a(n,i.children),n.every((function(e){return 1==e}))?(i.isSelect=!0,t.$refs.lendontable.toggleRowSelection(i,!0)):n.every((function(e){return 0==e}))?(i.isSelect=!1,t.$refs.lendontable.toggleRowSelection(i,!1)):i.isSelect="",0!=i.parentId&&o(i)}var c=i(e);1==c?n(e.children):2==c?(n(e.children),o(e)):3==c&&o(e)}}},o=r,c=(n("8c5a"),n("0c7c")),s=Object(c["a"])(o,a,i,!1,null,null,null);t["default"]=s.exports},6762:function(e,t,n){"use strict";var a=n("5ca1"),i=n("c366")(!0);a(a.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")("includes")},"8c5a":function(e,t,n){"use strict";n("96fd")},"96fd":function(e,t,n){},"9edf":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return o}));var a=n("b775");function i(e){return Object(a["a"])({url:"/config/product/roles/lists",method:"get",params:e})}function l(e){return Object(a["a"])({url:"/config/product/roles/create",method:"post",data:e})}function r(e){return Object(a["a"])({url:"/config/product/roles/modify",method:"put",data:e})}function o(e){return Object(a["a"])({url:"/config/product/roles/delete",method:"delete",data:e})}}}]);